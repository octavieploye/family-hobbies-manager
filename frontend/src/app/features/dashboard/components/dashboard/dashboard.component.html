<!-- dashboard.component.html -->
<div class="dashboard">
  <h1 class="dashboard__title">Tableau de bord</h1>

  <!-- Loading -->
  @if (loading()) {
    <div class="dashboard__loading">
      <mat-spinner diameter="48"></mat-spinner>
      <p>Chargement du tableau de bord...</p>
    </div>
  } @else {
    <!-- Error -->
    @if (error(); as errorMsg) {
      <div class="dashboard__error" role="alert">
        <mat-icon>error_outline</mat-icon>
        <p>{{ errorMsg }}</p>
      </div>
    }

    <!-- Family Header -->
    <div class="dashboard__header">
      <mat-card class="dashboard__family-card">
        <mat-card-content>
          <div class="dashboard__family-info">
            <mat-icon class="dashboard__family-icon">family_restroom</mat-icon>
            <div>
              <h2 class="dashboard__family-name">{{ familyName() }}</h2>
              <p class="dashboard__member-count">{{ memberCount() }} membre(s)</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Widgets Grid -->
    <div class="dashboard__widgets">
      <!-- Subscriptions Overview -->
      <app-subscriptions-overview
        [subscriptions]="activeSubscriptions()"
      ></app-subscriptions-overview>

      <!-- Upcoming Sessions -->
      <app-upcoming-sessions></app-upcoming-sessions>

      <!-- Attendance Overview -->
      <app-attendance-overview
        [members]="attendanceOverview()"
      ></app-attendance-overview>
    </div>
  }
</div>
